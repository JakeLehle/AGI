# Multi-Agent System Configuration
# Configured for zeus cluster with SLURM job scheduling

# Ollama Settings
ollama:
  model: "llama3.1:70b"
  base_url: "http://127.0.0.1:11434"
  context_length: 4096

# Agent Settings
agents:
  # Maximum iteration attempts per subtask (10-15 range)
  max_retries: 12
  
  # Timeout for individual operations (seconds)
  timeout_seconds: 3600
  
  # Enable dynamic tool creation when existing tools are insufficient
  enable_dynamic_tools: true
  
  # Supported languages for script execution
  supported_languages:
    - python
    - r
    - bash
    - perl
    - java

# SLURM Cluster Settings (zeus cluster)
slurm:
  # Enable SLURM job submission instead of interactive execution
  enabled: true
  
  # Default partition
  partition: "normal"
  
  # Resource defaults per job (conservative for parallel jobs)
  default_cpus: 192
  default_memory: "900G"
  default_time: "04:00:00"
  
  # Maximum time (normal partition limit on zeus)
  max_time: "7-00:00:00"
  
  # Cluster information (zeus)
  cluster:
    name: "zeus"
    nodes: 10
    cores_per_node: 192
    memory_per_node: "1000G"  # ~1TB
    partitions:
      - name: "normal"
        max_time: "7-00:00:00"
        nodes: "n1722-n1733"
      - name: "interactive"
        max_time: "3650-00:00:00"
        nodes: "n1734"
  
  # Parallel execution settings
  max_parallel_jobs: 10  # Max concurrent jobs to submit
  poll_interval: 10      # Seconds between job status checks
  max_poll_attempts: 720 # Max attempts (2 hours at 10s intervals)
  
  # Job naming prefix
  job_prefix: "agi"

# Parallel Execution Settings
parallel:
  # Enable parallel execution of independent subtasks
  enabled: true
  
  # Maximum concurrent threads (for non-SLURM parallel mode)
  max_threads: 4
  
  # Batch size for parallel task groups
  max_batch_size: 5

# Sandbox Settings
sandbox:
  # All agent file operations restricted to project directory
  enforce_sandbox: true
  
  # Standard subdirectories created in each project
  subdirectories:
    - data
    - data/inputs
    - data/outputs
    - scripts
    - logs
    - envs
    - reports
    - temp
    - slurm
    - slurm/scripts
    - slurm/logs

# Conda Environment Settings
conda:
  # Prefix for all project environments
  env_prefix: "agi_"
  
  # Default Python version for new environments
  default_python: "3.10"
  
  # Auto-export environment.yaml after package changes
  auto_export_yaml: true
  
  # Clean up environments after project completion
  auto_cleanup: false
  
  # Common channels to search
  channels:
    - defaults
    - conda-forge
    - bioconda

# Logging
logging:
  level: "INFO"
  json_format: true
  console_output: true
  
  # Log files to generate
  files:
    - execution_log.jsonl
    - agent_activity.jsonl
    - slurm_jobs.jsonl
    - errors.jsonl

# Git Integration
git:
  auto_commit: true
  commit_on_success: true
  tag_failures: true

# Documentation
documentation:
  auto_generate_readme: true
  update_frequency: "on_completion"
  include_code_samples: true
  
  # Generate these reports
  reports:
    - task_summary
    - environment_summary
    - execution_log
    - slurm_job_summary

# Workflow
workflow:
  enable_checkpointing: true
  checkpoint_frequency: "per_subtask"
  max_execution_time_minutes: 480  # 8 hours max
  
  # Sub-agent settings
  subtask:
    max_iterations: 12
    require_final_report: true
    report_on_failure: true

# Web Search
web_search:
  provider: "duckduckgo"
  max_results_per_query: 10
  rate_limit_seconds: 1.0
  cache_results: true

# Prompt Settings
prompts:
  # Directory for storing prompt files
  prompts_dir: "prompts"
  
  # Save all prompts with timestamps
  archive_prompts: true
  
  # Prompt file naming pattern
  naming_pattern: "prompt_{timestamp}_{task_hash}.txt"
